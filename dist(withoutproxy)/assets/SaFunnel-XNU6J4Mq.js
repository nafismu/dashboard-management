import{r as n,j as e}from"./index-DavSq415.js";import{H as C}from"./Helmet-CWmtKA_n.js";import{S as E}from"./Sidebar-ByFRoWwf.js";import"./sweetalert2.esm.all-BGf-Fe8G.js";const I=()=>{const[m,p]=n.useState([]),[h,i]=n.useState([]),[u,b]=n.useState(""),[d,g]=n.useState(""),[c,j]=n.useState(""),[r,N]=n.useState(null),[f,w]=n.useState(!1),v=()=>{w(!f)};n.useEffect(()=>{const s=new AbortController,t=s.signal;return(async()=>{try{const a=await(await fetch("https://api.nafismu.xyz/api/sales-performance",{signal:t})).json();p(a),i(a)}catch(l){l.name==="AbortError"?console.log("Fetch aborted"):console.error("Error fetching user:",l)}})(),()=>{s.abort()}},[]);const F=s=>{const t=s.target.value;b(t),x(t,d,c)},y=s=>{const t=s.target.value;g(t),x(u,t,c)},S=s=>{const t=s.target.value;j(t),x(u,d,t)},x=(s,t,o)=>{let l=m;s&&(l=l.filter(a=>a[s]>0)),t&&(l=l.filter(a=>new Date(a.tanggal)>=new Date(t))),o&&(l=l.filter(a=>new Date(a.tanggal)<=new Date(o))),i(l)},D=s=>{let t="ascending";r&&r.key===s&&r.direction==="ascending"&&(t="descending");const o=[...h].sort((l,a)=>l[s]<a[s]?t==="ascending"?-1:1:l[s]>a[s]?t==="ascending"?1:-1:0);N({key:s,direction:t}),i(o)};return e.jsxs("div",{className:"flex min-h-screen bg-gradient-to-b from-blue-50 to-white",children:[e.jsx(E,{role:"admin",isOpen:f,toggleSidebar:v}),e.jsx(C,{children:e.jsx("title",{children:"Sales Funnel Page"})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h1",{className:"text-5xl font-bold text-blue-700 mb-4",children:"SA Funnel Telda Kudus"}),e.jsx("div",{className:"w-24 h-1 bg-blue-500 mx-auto rounded-full"})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow flex-1 min-w-[250px]",children:[e.jsx("label",{className:"text-blue-700 font-medium mb-2 block",children:"Filter by Funnel"}),e.jsxs("select",{onChange:F,className:"w-full border border-blue-200 rounded-lg p-2.5 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 hover:border-blue-300 transition-colors",children:[e.jsx("option",{value:"",children:"All Funnels"}),e.jsx("option",{value:"f0",children:"F0 (Lead)"}),e.jsx("option",{value:"f1",children:"F1 (Opportunity)"}),e.jsx("option",{value:"f2",children:"F2 (Proposal)"}),e.jsx("option",{value:"f3",children:"F3 (Bidding)"}),e.jsx("option",{value:"f4",children:"F4 (Negotiation)"}),e.jsx("option",{value:"f5",children:"F5 (Contract)"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow flex-1 min-w-[250px]",children:[e.jsx("label",{className:"text-blue-700 font-medium mb-2 block",children:"Start Date"}),e.jsx("input",{type:"date",onChange:y,value:d,className:"w-full border border-blue-200 rounded-lg p-2.5 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 hover:border-blue-300 transition-colors"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow flex-1 min-w-[250px]",children:[e.jsx("label",{className:"text-blue-700 font-medium mb-2 block",children:"End Date"}),e.jsx("input",{type:"date",onChange:S,value:c,className:"w-full border border-blue-200 rounded-lg p-2.5 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 hover:border-blue-300 transition-colors"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden mt-16",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-600 text-white",children:[e.jsx("th",{className:"py-4 px-6 text-left font-semibold",children:"No"}),e.jsx("th",{className:"py-4 px-6 text-left font-semibold",children:"Nama Program "}),e.jsx("th",{className:"py-4 px-6 text-left font-semibold",children:"SPH"}),["F0","F1","F2","F3","F4","F5"].map((s,t)=>e.jsxs("th",{className:"py-4 px-6 text-left font-semibold cursor-pointer hover:bg-blue-700 transition-colors",onClick:()=>D(`f${t}`),children:[s," ",(r==null?void 0:r.key)===`f${t}`&&(r.direction==="ascending"?"↑":"↓")]},s)),e.jsx("th",{className:"py-4 px-6 text-left font-semibold",children:"Tanggal"})]})}),e.jsx("tbody",{children:h.map((s,t)=>e.jsxs("tr",{className:"border-b border-blue-100 hover:bg-blue-50 transition-colors",children:[e.jsx("td",{className:"py-3 px-6",children:t+1}),e.jsx("td",{className:"py-3 px-6",children:s.mitra}),e.jsx("td",{className:"py-3 px-6",children:s.namaSA}),e.jsx("td",{className:"py-3 px-6",children:s.f0}),e.jsx("td",{className:"py-3 px-6",children:s.f1}),e.jsx("td",{className:"py-3 px-6",children:s.f2}),e.jsx("td",{className:"py-3 px-6",children:s.f3}),e.jsx("td",{className:"py-3 px-6",children:s.f4}),e.jsx("td",{className:"py-3 px-6",children:s.f5}),e.jsx("td",{className:"py-3 px-6",children:new Date(s.tanggal).toLocaleDateString("Ind",{day:"numeric",month:"long",year:"numeric"})})]},t))})]})})})]})]})};export{I as default};
