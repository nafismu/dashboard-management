import{r as a,u as h,j as e}from"./index-DavSq415.js";import{a as b}from"./axios-B2YOV0tR.js";import{_ as j}from"./ClipLoader-BS182NfB.js";import{S as u}from"./sweetalert2.esm.all-BGf-Fe8G.js";import{H as w}from"./Helmet-CWmtKA_n.js";const k=()=>{const[s,g]=a.useState(""),[i,f]=a.useState(""),[l,c]=a.useState(""),[o,d]=a.useState(!1),m=h(),x=async t=>{t.preventDefault(),c(""),d(!0);try{const r=await b.post("https://api.nafismu.xyz/api/auth/login",{username:s,password:i}),{access_token:p,role:n}=r.data;localStorage.setItem("token",p),localStorage.setItem("role",n),localStorage.setItem("username",s),u.fire({icon:"success",title:"Login berhasil!",text:`Selamat datang, ${s}!`,showConfirmButton:!1,timer:1500}),n==="admin"?m("/admin"):n==="employee"&&m("/employee")}catch(r){u.fire({icon:"error",title:"Login gagal",text:"Username atau password salah. Silakan coba lagi.",confirmButtonText:"OK"}),console.error(r),c("Invalid credentials")}finally{d(!1)}};return e.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-b from-blue-50 to-white",children:[e.jsx(w,{children:e.jsx("title",{children:"Login Page"})}),e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-96",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Login"}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"User:"}),e.jsx("input",{type:"text",value:s,onChange:t=>g(t.target.value),required:!0,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring focus:ring-indigo-200"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Password:"}),e.jsx("input",{type:"password",value:i,onChange:t=>f(t.target.value),required:!0,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring focus:ring-indigo-200"})]}),l&&e.jsx("div",{className:"mb-4 text-red-600",children:l}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-indigo-500 text-white py-2 rounded-md hover:bg-indigo-600 transition duration-300",children:o?e.jsx(j,{color:"#fff",loading:o,size:20}):"Login"})]})]})]})};export{k as default};
