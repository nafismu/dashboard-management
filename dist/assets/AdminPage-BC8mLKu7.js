import{r as s,j as e}from"./index-DavSq415.js";import{S as b}from"./Sidebar-ByFRoWwf.js";import{H as w,M as j,L as y}from"./Header-BUwvy3Ax.js";import{a as h}from"./axios-B2YOV0tR.js";import{C as p,a as g,L as m,b as C,P as v,p as u,c as x,d as f,e as N,B as S,f as E}from"./index-DgI6MyfM.js";import{H as D}from"./Helmet-CWmtKA_n.js";import"./sweetalert2.esm.all-BGf-Fe8G.js";function k(t,r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:r},t),s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 11l7-7 7 7M5 19l7-7 7 7"}))}const L=s.forwardRef(k);p.register(g,m,C,v,u,x,f);const P=()=>{const[t,r]=s.useState([]),[o,d]=s.useState([]);s.useEffect(()=>{(async()=>{try{const c=await h.get("https://api.nafismu.xyz/api/sales-performance");r(c.data),d(predictionResponse.data.predictions)}catch(c){console.error("Error fetching data:",c)}})()},[]);const i=100;t.filter(a=>a.mitra>i).sort((a,c)=>c.mitra-a.mitra).slice(0,5);const l={labels:[...t.map(a=>a.mitra),...o.map((a,c)=>`Prediction ${c+1}`)],datasets:[{label:"SPH",data:t.map(a=>a.sph),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:2,fill:!1},{label:"Predicted SPH",data:[...Array(t.length).fill(null),...o],backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderDash:[5,5],borderWidth:2,fill:!1}]},n={responsive:!0,maintainAspectRatio:!1,scales:{y:{title:{display:!0,text:"Jumlah Subscription",color:"#333",font:{size:16,weight:"bold"}},grid:{color:"rgba(200, 200, 200, 0.3)"},ticks:{color:"#333"}},x:{title:{display:!0,text:"Mitra",color:"#333",font:{size:16,weight:"bold"}},grid:{display:!1},ticks:{color:"#333"}}},plugins:{legend:{position:"top",labels:{color:"#333"}}}};return e.jsxs("div",{className:"justify-center items-center",style:{width:"100%",height:"460px",padding:"30px",display:"flex",flexDirection:"column"},children:[e.jsx("h2",{className:"text-xl font-bold text-center mb-4",children:"Prediksi Sales dengan Regresi Linear"}),t.length>0||o.length>0?e.jsx(N,{data:l,options:n}):e.jsx("p",{className:"text-gray-500",children:"Loading data..."})]})};p.register(g,m,S,u,x,f);const z=()=>{const[t,r]=s.useState({labels:[],datasets:[{label:"Sales",data:[],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0"]}]});s.useEffect(()=>{(async()=>{try{const i=await h.get("https://api.nafismu.xyz/api/sales-data"),{labels:l,sales:n}=i.data;r({labels:l||[],datasets:[{label:"Sales",data:n||[],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0"]}]})}catch(i){console.error("Error fetching sales data:",i)}})()},[]);const o={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#333"}},title:{display:!0,text:"Distribusi Sales Data",color:"#333",font:{size:18,weight:"bold"}}},scales:{x:{title:{display:!0,text:"Kategori",color:"#333",font:{size:14,weight:"bold"}},ticks:{color:"#333"}},y:{title:{display:!0,text:"Jumlah Sales",color:"#333",font:{size:14,weight:"bold"}},ticks:{color:"#333"},grid:{color:"rgba(200, 200, 200, 0.3)"}}}};return e.jsx("div",{className:"w-full h-[460px] p-4 flex flex-col",children:t.labels.length>0?e.jsx(E,{data:t,options:o}):e.jsx("p",{className:"text-center text-gray-500",children:"Memuat data..."})})},F=()=>{const[t,r]=s.useState([]);s.useState([]);const[o,d]=s.useState([]);return s.useEffect(()=>{(async()=>{try{const l=await h.get("https://api.nafismu.xyz/api/predict",{});r(l.data.sales_predictions),d(["June","July","August"])}catch(l){console.error("Error fetching prediction data:",l)}})()},[]),e.jsxs("div",{className:"w-full h-[460px] p-4 flex flex-col",children:[e.jsx("h2",{className:"text-xl font-bold text-center",children:"hasil prediksi untuk  3 bulan dari F4_Negotiation "}),e.jsx("div",{className:"flex-1 w-full",children:e.jsx("p",{children:t.slice(0,1)})})]})},B=window.location.port?`:${window.location.port}`:"",A=`${window.location.protocol}//${window.location.hostname}${B}/api`;h.create({baseURL:A,headers:{"Content-Type":"application/json"}});function O(){const[t,r]=s.useState(),[o,d]=s.useState(!1);s.useEffect(()=>{(async()=>{try{const a=await(await fetch("https://api.nafismu.xyz/api/customers/customer-count")).json();r(a),setLoading(!1)}catch(n){n.name==="AbortError"?console.log("Fetch aborted"):(console.error("Error fetching user:",n),setLoading(!0))}})()},[]);const i=()=>{d(!o)};return e.jsxs("div",{className:"flex min-h-screen bg-gradient-to-b from-blue-50 to-white ",children:[e.jsx(D,{children:e.jsx("title",{children:"Admin Dashboard Page"})}),e.jsx(b,{role:"admin",isOpen:o,toggleSidebar:i}),e.jsxs("div",{className:`flex-1 transition-all duration-300 ${o?"ml-64":"ml-0"}`,children:[e.jsx(w,{Namepage:"Dashboard Laporan Indibiz"}),e.jsxs("div",{className:"mb-4 p-6 bg-white",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-1 text-center rounded p-6 text-white shadow-md bg-blue-400 transition-all duration-300 transform hover:scale-105 hover:shadow-2xl",children:[e.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Total Customers"}),e.jsx("p",{className:"text-4xl font-bold mb-4",children:t&&t.total_customers})]}),e.jsx(j,{})]}),e.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed bottom-8 right-8 p-3 bg-indigo-600 rounded-full shadow-lg hover:bg-indigo-700 transition duration-300 text-white",style:{zIndex:1e3},children:e.jsx(L,{className:"w-6 h-6"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-8 mb-4",children:[e.jsx("div",{className:"bg-white shadow-lg rounded-lg p-6",children:e.jsx(y,{})}),e.jsx("div",{className:"bg-white shadow-lg rounded-lg p-6",children:e.jsx(P,{})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-8",children:[e.jsx("div",{className:"bg-white shadow-lg rounded-lg p-6",children:e.jsx(z,{})}),e.jsx("div",{className:"bg-white shadow-lg rounded-lg",children:e.jsx(F,{})})]})]})]})]})}export{O as default};
