import{r as l,j as e}from"./index-DavSq415.js";import{a as c}from"./axios-B2YOV0tR.js";import{S as a}from"./sweetalert2.esm.all-BGf-Fe8G.js";import{H as E}from"./Helmet-CWmtKA_n.js";import{S as v}from"./Sidebar-ByFRoWwf.js";const k=()=>{const[p,x]=l.useState([]),[N,u]=l.useState(!0),[B,h]=l.useState(null),[C,f]=l.useState(null),d="https://api.nafismu.xyz/api/employees",[m,b]=l.useState(!1),y=()=>{b(!m)};l.useEffect(()=>{const t=new AbortController,s=t.signal;return(async()=>{try{const o=await c.get(d,{signal:s});x(o.data),u(!1)}catch{h("Failed to fetch employee"),u(!1)}})(),()=>t.abort()},[]);const g=async()=>{const{value:t}=await a.fire({title:"Input Employee Data",html:`
                <button id="close-btn" class="swal2-close" style="background-color:transparent; border:none; cursor:pointer; font-size:24px; position:absolute; top:10px; right:10px;">&times;</button>
                <input id="name" class="swal2-input" placeholder="Name" required>
                <input id="phone" class="swal2-input" placeholder="Phone" required>
                <input id="email" class="swal2-input" placeholder="Email" required>
                <input id="address" class="swal2-input" placeholder="Address" required>
                <input id="position" class="swal2-input" placeholder="Position" required>
            `,showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Back",focusConfirm:!1,background:"#f0f8ff",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",customClass:{popup:"custom-swal-popup"},didOpen:()=>{document.getElementById("close-btn").addEventListener("click",()=>{a.close()})},preConfirm:()=>{const s=document.getElementById("name").value,n=document.getElementById("phone").value,o=document.getElementById("email").value,r=document.getElementById("address").value,i=document.getElementById("position").value;return!s||!n||!o||!r||!i?(a.showValidationMessage("All fields are required"),null):{name:s,email:o,phone:n,address:r,position:i}}});if(t)try{const s={name:t.name,phone:t.phone,email:t.email,address:t.address,position:t.position};await c.post(d,s),a.fire({title:"Success!",text:"Employee added successfully!",icon:"success",confirmButtonText:"OK"}),fetchCustomers()}catch(s){a.fire({title:"Error!",text:`There was an error adding the employee! ${s.message}`,icon:"error",confirmButtonText:"OK"})}},w=t=>{f(t.id),a.fire({title:"Edit employee Data",html:`
                <input id="name" class="swal2-input" value="${t.name}" required>
                <input id="phone" class="swal2-input" value="${t.phone}" required>
                <input id="email" class="swal2-input" value="${t.email}" required>
                <input id="address" class="swal2-input" value="${t.address}" required>
                <input id="position" class="swal2-input" value="${t.position}" required>
            `,focusConfirm:!1,preConfirm:()=>{const s=document.getElementById("name").value,n=document.getElementById("phone").value,o=document.getElementById("email").value,r=document.getElementById("address").value,i=document.getElementById("position").value;return!s||!o||!r||!n||!i?(a.showValidationMessage("All fields are required"),null):{name:s,email:o,address:r,phone:n,position:i}}}).then(async s=>{if(s.isConfirmed){const n={name:s.value.name,phone:s.value.phone,email:s.value.email,address:s.value.address,position:s.value.position};try{await c.put(`${d}/${t.id}`,n),a.fire("Success!","Employee updated successfully!","success"),fetchCustomers()}catch{a.fire("Error!","Failed to update employee","error")}}})},j=async t=>{if((await a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await c.delete(`${d}/${t}`),fetchCustomers(),a.fire({title:"Deleted!",text:"Employee has been deleted.",icon:"success",confirmButtonText:"OK"})}catch{a.fire({title:"Error!",text:"Failed to delete employee.",icon:"error",confirmButtonText:"OK"})}};return e.jsxs("div",{className:"flex min-h-screen bg-gradient-to-b from-blue-50 to-white",children:[e.jsx(v,{role:"admin",isOpen:m,toggleSidebar:y}),e.jsx(E,{children:e.jsx("title",{children:"Customer List Page"})}),e.jsxs("div",{className:" flex-1 container mx-auto py-8 px-4",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 space-y-4 sm:space-y-0",children:e.jsx("button",{className:"bg-green-500 text-white font-bold py-2 px-4 rounded-md w-full sm:w-auto",onClick:g,children:"Tambah Pelanggan"})}),e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h1",{className:"text-3xl sm:text-5xl font-bold text-blue-700 mb-4",children:"List Daftar Pegawai"}),e.jsx("div",{className:"w-24 h-1 bg-blue-500 mx-auto rounded-full"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300 rounded-lg shadow-md",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200 text-left",children:[e.jsx("th",{className:"py-3 px-6 border-b-2",children:"No"}),e.jsx("th",{className:"py-3 px-6 border-b-2",children:"Id Pegawai"}),e.jsx("th",{className:"py-3 px-6 border-b-2",children:"Email"}),e.jsx("th",{className:"py-3 px-6 border-b-2",children:"Nomor Telepon"}),e.jsx("th",{className:"py-3 px-6 border-b-2",children:"Alamat"}),e.jsx("th",{className:"py-3 px-6 border-b-2",children:"Jabatan"}),e.jsx("th",{className:"py-3 px-6 border-b-2",children:"Aksi"})]})}),e.jsx("tbody",{children:p.map((t,s)=>e.jsxs("tr",{className:"border-b hover:bg-gray-100",children:[e.jsx("td",{className:"py-3 px-6 text-left",children:s+1}),e.jsx("td",{className:"py-3 px-6 text-left",children:t.employee_id}),e.jsx("td",{className:"py-3 px-6 text-left",children:t.email}),e.jsx("td",{className:"py-3 px-6 text-left",children:t.phone}),e.jsx("td",{className:"py-3 px-6 text-left",children:t.address}),e.jsx("td",{className:"py-3 px-6 text-left",children:t.position}),e.jsxs("td",{className:"py-3 px-6 flex justify-center mt-3",children:[e.jsx("button",{className:"bg-yellow-500 text-white px-4 py-2 mr-2 rounded hover:bg-yellow-600",onClick:()=>w(t),children:"Edit"}),e.jsx("button",{className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",onClick:()=>j(t.id),children:"Delete"})]})]},t.id))})]})})]})]})};export{k as default};
