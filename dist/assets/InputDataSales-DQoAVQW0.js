import{r as n,j as e}from"./index-DavSq415.js";import{S as f}from"./Sidebar-ByFRoWwf.js";import{a as m}from"./axios-B2YOV0tR.js";import{S as x}from"./sweetalert2.esm.all-BGf-Fe8G.js";const S=()=>{const[o,i]=n.useState([{name:"",email:"",stage:"",comments:""}]),[h,p]=n.useState([]),[c,u]=n.useState(!1),b=localStorage.getItem("role"),j=()=>u(!c),l=(a,t)=>{const{name:s,value:r}=t.target,d=[...o];d[a][s]=r,i(d)},g=async a=>{a.preventDefault();try{const t=await m.post("https://api.nafismu.xyz/api/sales-input",o,{headers:{"Content-Type":"application/json"}});t.status===201||t.status===200?(x.fire({icon:"success",title:"Success!",text:"Data Berhasil disimpan!",showConfirmButton:!1,timer:1500}),i([{name:"",email:"",stage:"",comments:""}]),fetchDatabaseData()):x.fire({icon:"error",title:"Error",text:"Data gagal disimpan!",showConfirmButton:!1,timer:1500})}catch(t){console.error("Error submitting data:",t),alert("An error occurred while saving the data.")}};return n.useEffect(()=>{const a=new AbortController,t=a.signal;return(async()=>{try{const r=await m.get("https://api.nafismu.xyz/api/sales-input",{signal:t});p(r.data)}catch(r){console.error("Error saat mengambil data dari database:",r)}})(),()=>{a.abort()}},[]),e.jsxs("div",{className:"flex min-h-screen bg-gradient-to-b from-blue-50 to-white",children:[e.jsx(f,{role:b,isOpen:c,toggleSidebar:j}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-blue-700 mb-4",children:"Input Data Sales"}),e.jsx("div",{className:"w-16 md:w-24 h-1 bg-blue-500 mx-auto rounded-full"})]}),e.jsxs("form",{onSubmit:g,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border bg-light text-white rounded-lg overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-500 text-sm md:text-base",children:[e.jsx("th",{className:"p-2 border",children:"Nama"}),e.jsx("th",{className:"p-2 border",children:"Email"}),e.jsx("th",{className:"p-2 border",children:"Tahap"}),e.jsx("th",{className:"p-2 border",children:"Komentar"})]})}),e.jsx("tbody",{children:o.map((a,t)=>e.jsxs("tr",{className:"text-sm md:text-base",children:[e.jsx("td",{className:"p-2 border",children:e.jsx("input",{type:"text",name:"name",value:a.name,onChange:s=>l(t,s),className:"border w-full p-1 text-black",required:!0})}),e.jsx("td",{className:"p-2 border",children:e.jsx("input",{type:"email",name:"email",value:a.email,onChange:s=>l(t,s),className:"border w-full p-1 text-black",required:!0})}),e.jsx("td",{className:"p-2 border",children:e.jsxs("select",{name:"stage",value:a.stage,onChange:s=>l(t,s),className:"border w-full p-1 text-black",required:!0,children:[e.jsx("option",{value:"",children:"Pilih Tahap"}),e.jsx("option",{value:"F0",children:"F0: Lead"}),e.jsx("option",{value:"F1",children:"F1: Opportunity"}),e.jsx("option",{value:"F2",children:"F2: Proposal"}),e.jsx("option",{value:"F3",children:"F3: Bidding"}),e.jsx("option",{value:"F4",children:"F4: Negotiation"}),e.jsx("option",{value:"F5",children:"F5: Contract"})]})}),e.jsx("td",{className:"p-2 border",children:e.jsx("input",{type:"text",name:"comments",value:a.comments,onChange:s=>l(t,s),className:"border w-full p-1 text-black"})})]},t))})]})}),e.jsx("div",{className:"mt-4 flex flex-col md:flex-row items-center gap-2",children:e.jsx("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors w-full md:w-auto",children:"Simpan"})})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-blue-700 mb-4",children:"Data Sales yang Tersimpan"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border bg-light  rounded-lg overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-500 text-sm md:text-base text-white",children:[e.jsx("th",{className:"p-2 border",children:"Nama"}),e.jsx("th",{className:"p-2 border",children:"Email"}),e.jsx("th",{className:"p-2 border",children:"Tahap"}),e.jsx("th",{className:"p-2 border",children:"Komentar"})]})}),e.jsx("tbody",{children:h.map((a,t)=>e.jsxs("tr",{className:"text-sm md:text-base",children:[e.jsx("td",{className:"p-2 border",children:a.name}),e.jsx("td",{className:"p-2 border",children:a.email}),e.jsx("td",{className:"p-2 border",children:a.stage}),e.jsx("td",{className:"p-2 border",children:a.comments})]},t))})]})})]})]})]})};export{S as default};
